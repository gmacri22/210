<html>
<head>
<title>Backpack Login</title>

<link rel="stylesheet" type="text/css" href="goddamnedstyle.css">

<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript">

// Redirect: You can't log in if you're logged in.

if(localStorage['login'] != undefined){
    window.location.replace("http://localhost:3000/backpack.html");
}

$(document).ready(function() {
  $(document).ajaxError(function() {
    alert("Sorry, there was a problem!");
  });
  
  $("#loginButton").click(function() {
    $.ajax({
      url: "login/?username=" + $("#nameBox").val() +
		   "&password="+$("#passwordBox").val(),
      type: "GET",
      dataType : "json", // this URL returns data in JSON format
      success: function(data) {
        console.log("You received some data!", data);
        if (data.username && data.password) {
          localStorage['login'] = data.username;
          window.location.replace("http://localhost:3000/backpack.html");
        } else {
          $("#status").html("Error: could not find user!");
        }
      },
    });
  });
 
  $("#createButton").click(function() {
    $.ajax({
      url: "login/",
      type: "POST",
      dataType : "text", // this URL returns a plain text string, not JSON
      data : { username: $("#nameBox").val(),
               password: $("#passwordBox").val()
             },
      success: function(data) {
        window.location.replace("http://localhost:3000/createaccount.html");
      },
    });
  });
});
</script>
</head>

  <body>
 
  <div id="containerc">
  <h1>Backpack</h1>
      <div id="left">
        Username: <input id="nameBox" type="text" size="20"/>
        Password: <input id="passwordBox" type="text" size="20"/>
        <button id="loginButton" button type="button" class="btn">Login</button>
      </div>
      <div id="create">
        Don't have an account? 
        <button id="createButton" button type="button" class="btn">Sign Up</button>
      </div>
      <div id="right">
         What is Backpack?
         A bunch of text describing what is is because that is the sort of thing you put on a login page Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin et enim laoreet, ullamcorper massa fringilla, condimentum purus. Nam at volutpat tortor, sed bibendum lectus. Fusce finibus, orci vel condimentum scelerisque, erat est vulputate tellus, et dictum erat libero vel tellus. Nunc commodo ullamcorper orci dictum efficitur.
      </div>
    </div>

    <div id="status"> </div>
  </body>
</html>
